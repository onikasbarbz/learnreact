(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0fec0f13"],{1623:function(e,t,a){"use strict";a.d(t,"a",function(){return s});a("cadf"),a("551c"),a("097d");var s={UserPoolId:"us-west-2_EPhfZF0GZ",ClientId:"6uck8t06vthc9f68or3vbna33n"}},"49ef":function(e,t,a){"use strict";var s=a("6a27"),r=a.n(s);r.a},"6a27":function(e,t,a){},"7f7f":function(e,t,a){var s=a("86cc").f,r=Function.prototype,i=/^\s*function ([^ (]*)/,n="name";n in r||a("9e1e")&&s(r,n,{configurable:!0,get:function(){try{return(""+this).match(i)[1]}catch(e){return""}}})},ed81:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"animated fadeIn"},[a("b-row",[a("b-col",{attrs:{sm:"12"}},[e.loading?a("b-card",{staticClass:"notranslate",attrs:{header:"Manage Users"}},[e._v("Loading, please wait...")]):"administrator"!=this.currentUser.role?a("b-card",{attrs:{header:"Manage Users"}},[e._v("You must be an administrator to manage users")]):a("b-card",{attrs:{header:"Manage Users"}},["administrator"!=this.currentUser.role?a("b-alert",{attrs:{variant:"info",show:""}},[e._v("You must be an administrator to edit this page")]):e._e(),a("b-alert",{attrs:{id:"alertMessage",variant:this.alertMessage.variant,show:this.alertMessage.show}},[e._v(e._s(this.alertMessage.message))]),a("b-button-toolbar",["administrator"==this.currentUser.role?a("b-button",{staticClass:"m-1",attrs:{variant:"dark"},on:{click:e.saveClicked}},[e._v("Save")]):a("b-button",{staticClass:"m-1",attrs:{variant:"dark",disabled:""}},[e._v("Save")]),a("b-button",{staticClass:"m-1",attrs:{variant:"dark"},on:{click:e.cancelClicked}},[e._v("Cancel")])],1),a("br"),a("strong",[e._v("Your subscriptions will be updated per number of users here (guest users are free). Your credit card will be automatically charged as needed.")]),a("br"),a("br"),a("b-table",{attrs:{hover:"true",striped:"true",bordered:"true",small:"true",responsive:"md",items:e.items,fields:e.fields,"current-page":"1","per-page":"500"},scopedSlots:e._u([{key:"email",fn:function(t){return[t.index==e.items.length-1?a("b-form-input",{attrs:{size:"sm"},on:{change:e.addNewEmployee},model:{value:t.item.email,callback:function(a){e.$set(t.item,"email",a)},expression:"data.item.email"}}):t.item.email!=e.currentUser.email?a("b-form-input",{attrs:{size:"sm"},model:{value:t.item.email,callback:function(a){e.$set(t.item,"email",a)},expression:"data.item.email"}}):a("b-form-input",{attrs:{plaintext:"",size:"sm"},model:{value:t.item.email,callback:function(a){e.$set(t.item,"email",a)},expression:"data.item.email"}})]}},{key:"name",fn:function(t){return[a("b-form-input",{attrs:{size:"sm"},model:{value:t.item.name,callback:function(a){e.$set(t.item,"name",a)},expression:"data.item.name"}})]}},{key:"role",fn:function(t){return[a("b-form-select",{attrs:{size:"sm",options:["administrator","advanced","standard","guest (free)"],disabled:t.item.email==e.currentUser.email},model:{value:t.item.role,callback:function(a){e.$set(t.item,"role",a)},expression:"data.item.role"}})]}},{key:"action",fn:function(t){return[a("b-button",{attrs:{variant:"secondary",size:"sm",disabled:t.index==e.items.length-1||t.item.email==e.currentUser.email},on:{click:function(a){a.stopPropagation(),e.deleteClicked(a,t.index)}}},[a("svg",{staticClass:"bi bi-trash",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",fill:"currentColor",viewBox:"0 0 16 16"}},[a("path",{attrs:{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"}}),a("path",{attrs:{"fill-rule":"evenodd",d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"}})])])]}}])}),a("br"),a("div",[a("small",[e._v("\n\t\t\t\t\tNew users will receive email with temporary password to sign in."),a("br"),e._v("\n\t\t\t\t\tRoles: (1) administrator: can read/write all projects, users, and subscriptions; (2) advanced: can read/write all projects; (3) standard: can be granted read/write permission per project; (4) guest: can be granted read only permission per project"),a("br"),e._v("\n\t\t\t\t\tEmail us at "),a("a",{attrs:{href:"mailto:support@onlinegantt.com"}},[e._v("support@onlinegantt.com")]),e._v(" for technical assistance. Expect our response within 24 hours."),a("br")])])],1)],1)],1)],1)},r=[],i=(a("7f7f"),a("28a5"),a("cadf"),a("551c"),a("097d"),a("4c44")),n=a("1623"),l=a("bc3a"),o=a.n(l),m={name:"users",data:function(){return{items:[],fields:{email:{label:"Email"},name:{label:"Name"},role:{label:"Role"},action:{label:"",thStyle:{width:"20px"}}},dbItems:[],currentUser:{cognitoUser:null,email:"",role:"",company:"",token:""},alertMessage:{show:!1,variant:"success",message:""},cancelRefresh:!1,loading:!0}},mounted:function(){var e=new i["CognitoUserPool"](n["a"]),t=e.getCurrentUser(),a=this;this.currentUser.cognitoUser=t,null!=t&&t.getSession(function(e,s){s.isValid()&&(a.currentUser.token=s.getIdToken().getJwtToken(),t.getUserAttributes(function(e,t){if(!e){for(var s=0;s<t.length;s++)"family_name"==t[s].getName()?a.currentUser.company=t[s].getValue():"given_name"==t[s].getName()?a.currentUser.role=t[s].getValue():"email"==t[s].getName()&&(a.currentUser.email=t[s].getValue());o.a.get("/user-admin/employees",{params:{token:a.currentUser.token}}).then(function(e){a.dbItems=JSON.parse(JSON.stringify(e.data)),a.items=JSON.parse(JSON.stringify(a.dbItems)),a.items.push({email:"",name:"",role:"administrator"}),a.loading=!1}).catch(function(e){})}}))}),document.title="Online Gantt Chart Software"},methods:{deleteClicked:function(e,t){this.items.splice(t,1),e.target.blur()},addNewEmployee:function(e){this.items.push({email:"",name:"",role:"administrator"})},cancelClicked:function(e){e.target.blur(),this.alertMessage.show=!1,this.alertMessage.variant="success",this.alertMessage.message="";var t=this;this.cancelRefresh?o.a.get("/user-admin/employees",{params:{token:t.currentUser.token}}).then(function(e){t.dbItems=JSON.parse(JSON.stringify(e.data)),t.items=JSON.parse(JSON.stringify(t.dbItems)),t.items.push({email:"",name:"",role:"administrator"})}).catch(function(e){}):(t.items=JSON.parse(JSON.stringify(t.dbItems)),t.items.push({email:"",name:"",role:"administrator"}))},saveClicked:function(e){if(e.target.blur(),-1!=this.validateEmail())this.alertMessage.variant="danger",this.alertMessage.message="Invalid email - users must have valid and unique email to receive temporary password",this.alertMessage.show=!0;else if(-1!=this.validateName())this.alertMessage.variant="danger",this.alertMessage.message="Invalid name - user name cannot be empty",this.alertMessage.show=!0;else{e.target.disabled=!0,this.alertMessage.show=!1,this.alertMessage.variant="success",this.alertMessage.message="";var t=this;o.a.put("/user-admin/employees",{token:this.currentUser.token,items:this.items.slice(0,-1)}).then(function(a){t.dbItems=JSON.parse(JSON.stringify(t.items.slice(0,-1))),t.cancelRefresh=!1,t.alertMessage.variant="success",t.alertMessage.message="Users updated successfully",t.alertMessage.show=!0,e.target.disabled=!1}).catch(function(a){t.cancelRefresh=!0,t.alertMessage.variant="danger","Internal Server Error"==a.response.data?t.alertMessage.message="Update failed. Please try again later.":t.alertMessage.message=a.response.data,t.alertMessage.show=!0,e.target.disabled=!1})}},validateEmail:function(){for(var e,t=[],a=0;a<this.items.length-1;a++){if(this.items[a].email=this.items[a].email.trim(),""==this.items[a].email)return a;if(e=this.items[a].email.split("@"),2!=e.length)return a;if(""==e[0]||""==e[1])return a;var s=this.items[a].email;if(-1!==t.indexOf(s))return a;t.push(s)}return-1},validateName:function(){for(var e=0;e<this.items.length-1;e++)if(this.items[e].name=this.items[e].name.trim(),""==this.items[e].name)return e;return-1}}},c=m,u=(a("49ef"),a("2877")),d=Object(u["a"])(c,s,r,!1,null,null,null);d.options.__file="Users.vue";t["default"]=d.exports}}]);